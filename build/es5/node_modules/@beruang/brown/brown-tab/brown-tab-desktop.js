define(["../../../@polymer/polymer/polymer-element.js","../../../@polymer/polymer/lib/mixins/gesture-event-listeners.js","../../../@polymer/polymer/lib/utils/flattened-nodes-observer.js","../../../@polymer/polymer/lib/utils/render-status.js","../../../@polymer/polymer/lib/utils/gestures.js","../../../@polymer/iron-flex-layout/iron-flex-layout.js","../../../@webcomponents/shadycss/entrypoints/apply-shim.js","../../beruang-behavior.js","../brown-behavior.js","../brown-style.js"],function(_polymerElement,_gestureEventListeners,_flattenedNodesObserver,_renderStatus,Gestures,_ironFlexLayout,_applyShim,_beruangBehavior,_brownBehavior,_brownStyle){"use strict";Gestures=babelHelpers.interopRequireWildcard(Gestures);function _templateObject_b29eee308c3b11e98d1395f7d7834de1(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style  include=\"brown-style\">\n        :host {\n          @apply --layout-vertical;\n        }\n\n        :host > #header {\n          @apply --layout-flex-none;\n          @apply --layout-self-stretch;\n          @apply --layout-horizontal;\n          @apply --layout-center;\n          background-color: var(--tab-header-bgcolor);\n          min-height: var(--tab-header-minheight);\n          padding-left:10px;\n        }\n\n        :host([dynamic]) > #header {\n          padding-left:40px;\n        }\n\n        :host > #header > .scroller {\n          @apply --layout-flex-none;\n          height:16px;\n          color: var(--tabitem-active-color);\n          cursor:pointer;\n          visibility:hidden;\n        }\n\n        :host > #header > .scroller.scroll {\n          visibility:visible;\n        }\n\n        :host > #header > #header-item {\n          @apply --layout-flex;\n          @apply --layout-self-stretch;\n          @apply --layout-horizontal;\n          position:relative;\n          overflow-x:hidden;\n        }\n\n        :host > #header > #header-item > ::slotted([slot=header]) {\n          @apply --layout-flex-none;\n          @apply --layout-self-stretch;\n          padding: 0px 10px;\n        }\n\n        :host > #content {\n          @apply --layout-flex;\n          @apply --layout-self-stretch;\n          position:relative;\n          background-color: var(--tab-content-bgcolor);\n        }\n\n        :host > #content > ::slotted([slot=content]) {\n          @apply --layout-fit;\n          margin:5px 5px;\n          font-family:var(--tab-content-font-family);\n          display:none;\n        }\n        :host > #content > ::slotted(.content-active) {\n          display:block;\n        }\n      </style>\n      <div id=\"header\">\n        <iron-icon icon=\"chevron-left\" id=\"pre-scroll\" class=\"scroller\" on-tap=\"_preScroll\"></iron-icon>\n        <div id=\"header-item\"><slot id=\"header-slot\" name=\"header\"></slot></div>\n        <iron-icon icon=\"chevron-right\" id=\"post-scroll\" class=\"scroller\" on-tap=\"_postScroll\"></iron-icon>\n      </div>\n      <div id=\"content\"><slot name=\"content\"></slot></div>\n    "]);_templateObject_b29eee308c3b11e98d1395f7d7834de1=function _templateObject_b29eee308c3b11e98d1395f7d7834de1(){return data};return data}var BrownTabDesktop=/*#__PURE__*/function(_BrownBehavior){babelHelpers.inherits(BrownTabDesktop,_BrownBehavior);function BrownTabDesktop(){babelHelpers.classCallCheck(this,BrownTabDesktop);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(BrownTabDesktop).apply(this,arguments))}babelHelpers.createClass(BrownTabDesktop,[{key:"ready",value:function ready(){var _this=this;babelHelpers.get(babelHelpers.getPrototypeOf(BrownTabDesktop.prototype),"ready",this).call(this);Gestures.addListener(this,"tap",function(e){//tab item tap
for(var path=e.path||e.composedPath&&e.composedPath(),tabItem,i=0,el;i<path.length;i++){//pastikan tap berasal dari tabItem
el=path[i];if("BROWN-TABITEM-DESKTOP"==el.nodeName){tabItem=el;break}}if(!tabItem){//tap bukan berasal dari tabtItem, return cepat
return}var closing="tab-closer"==path[0].id;//apakah closing?
if(closing){//close tabitem
//1. pindahkan status aktif ke tabItem lain (jika ada)
if(tabItem.active){//if closing tabitem is active then set other to active
var other=_this._getTabItemSibling(tabItem,null/*no criteria*/);if(other){//jika ada
other.active=!0;//pindahkan status active ke tabItem lain
}}//2. remove content (jika ada)
var content=_this._getContentByDataTab(tabItem.id);//ambil content
if(content){//jika ada
_this.removeChild(content);//remove content
}//3. remove tabItem
_this.removeChild(tabItem);//remove tabItem
}else{//aktifkan tab
if(tabItem.active){//tabItem sudah berstatus aktif
return;//tidak perlu mengaktifkan tabItem
}//////////////////////mengatifkan tab, nonaktifkan tab lain//////////////////////////////////////////
//1. cari tabItem lain yang berstatus aktif, jika ada maka batalkan status aktif
var callback=function callback(sibling){return!0==sibling.active;//mencari sibling yg aktif
},_other=_this._getTabItemSibling(tabItem,callback);//other -> sibling
if(_other){_other.active=!1;//set other to non active
}//////////////////////////////////////////////////////////////
//2. pastikan tabItem terlihat seluruhnya, scroll jika perlu
_this._ensureItemVisible(tabItem);//3. set status active tabItem menjadi true
tabItem.active=!0}});this.addEventListener("active-changed",function(e){var content=_this._getContentByDataTab(e.target.id);if(!content){return}if(e.detail.active){content.classList.add("content-active")}else{content.classList.remove("content-active")}});var slot=this.shadowRoot.querySelector("#header-slot");this._observer=new _flattenedNodesObserver.FlattenedNodesObserver(slot,function(info){if(0<info.addedNodes.length||0<info.removedNodes.length){(0,_renderStatus.afterNextRender)(_this,function(){this._evaluateScroll()})}})}//ready()
},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(BrownTabDesktop.prototype),"connectedCallback",this).call(this);this._fWndResize=this._fWndResize||this._evaluateScroll.bind(this);window.addEventListener("resize",this._fWndResize)}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(BrownTabDesktop.prototype),"disconnectedCallback",this).call(this);window.removeEventListener("resize",this._fWndResize)}},{key:"_getTabItemSibling",value:function _getTabItemSibling(el,callback/*syarat*/){var sibling,element=el;//forward
while(sibling=element.nextElementSibling){if("BROWN-TABITEM-DESKTOP"==sibling.nodeName){if(!callback||callback(sibling)){return sibling}}element=sibling}//backward
element=el;while(sibling=element.previousElementSibling){if("BROWN-TABITEM-DESKTOP"==sibling.nodeName){if(!callback||callback(sibling)){return sibling}}element=sibling}return null}//_getTabItemSibling(el, callback)
},{key:"_getContentByDataTab",value:function _getContentByDataTab(tabId){return this._getLightDOM(!0,function(el){var data="BROWN-TABITEM-DESKTOP"!=el.nodeName?el.getAttribute("data-tab"):null;return tabId==data})}},{key:"_getLightDOM",value:function _getLightDOM(forward,callback){var el=forward?this.firstElementChild:this.lastElementChild;while(el){if(callback(el)){return el}el=forward?el.nextElementSibling:el.previousElementSibling}return null}},{key:"_ensureItemVisible",value:function _ensureItemVisible(tabItem){var container=this.shadowRoot.querySelector("#header-item"),right=tabItem.offsetLeft+tabItem.offsetWidth-container.scrollLeft,left=tabItem.offsetLeft-container.scrollLeft,scroll=0;if(right>container.offsetWidth){scroll=right-container.offsetWidth}else if(0>left){scroll=left}if(0!=scroll){container.scrollLeft+=scroll;this._evaluateScroll()}}},{key:"_evaluateScroll",value:function _evaluateScroll(){var _this2=this;setTimeout(function(){_this2._evaluateScrollDo("#post-scroll");_this2._evaluateScrollDo("#pre-scroll")},100)}},{key:"_evaluateScrollDo",value:function _evaluateScrollDo(scrollerId){var container=this.shadowRoot.querySelector("#header-item"),scroller=this.shadowRoot.querySelector(scrollerId),visible=!1;if("#post-scroll"==scrollerId){var tabItem=this._getLightDOM(!1,function(el){//get last tabItem
return"BROWN-TABITEM-DESKTOP"==el.nodeName});if(tabItem){var right=tabItem.offsetLeft+tabItem.offsetWidth-container.scrollLeft;visible=right>container.offsetWidth}}else if("#pre-scroll"==scrollerId){var _tabItem=this._getLightDOM(!0,function(el){//get first tabItem
return"BROWN-TABITEM-DESKTOP"==el.nodeName});if(_tabItem){var left=_tabItem.offsetLeft-container.scrollLeft;visible=0>left}}if(visible){scroller.classList.add("scroll")}else{scroller.classList.remove("scroll")}}},{key:"_preScroll",value:function _preScroll(e){var tabItem=this._getLightDOM(!0,function(el){//search first tabItem
return"BROWN-TABITEM-DESKTOP"==el.nodeName});if(tabItem){var container=this.shadowRoot.querySelector("#header-item"),offset=tabItem.offsetLeft-container.scrollLeft;if(0>offset){offset=Math.max(offset,-1*(container.offsetWidth/5));container.scrollLeft+=offset;this._evaluateScroll()}}}},{key:"_postScroll",value:function _postScroll(e){var tabItem=this._getLightDOM(!1,function(el){//search last tabItem
return"BROWN-TABITEM-DESKTOP"==el.nodeName});if(tabItem){var container=this.shadowRoot.querySelector("#header-item"),right=tabItem.offsetLeft+tabItem.offsetWidth-container.scrollLeft,offset=right-container.offsetWidth;if(0<offset){offset=Math.min(offset,container.offsetWidth/5);container.scrollLeft+=offset;this._evaluateScroll()}}}}],[{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_b29eee308c3b11e98d1395f7d7834de1())}},{key:"properties",get:function get(){return{dynamic:{type:Boolean,value:!1,reflectToAttribute:!0}}}}]);return BrownTabDesktop}((0,_brownBehavior.BrownBehavior)((0,_beruangBehavior.BeruangBehavior)((0,_gestureEventListeners.GestureEventListeners)(_polymerElement.PolymerElement))));window.customElements.define("brown-tab-desktop",BrownTabDesktop)});